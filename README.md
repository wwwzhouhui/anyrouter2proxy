# LLM API Protocol Converter Proxy

ä¸€ä¸ªç”¨äºåœ¨ OpenAI å’Œ Anthropic API åè®®ä¹‹é—´è¿›è¡ŒåŒå‘è½¬æ¢çš„ä»£ç†æœåŠ¡é›†åˆï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œè®©ä½ ä½¿ç”¨ä»»æ„å®¢æˆ·ç«¯ SDK è®¿é—®ä¸åŒçš„åç«¯æœåŠ¡ã€‚

## ä»€ä¹ˆæ˜¯**AnyRouter.top**

**AnyRouter.top** æ˜¯ä¸€ä¸ªæä¾› API è½¬å‘æœåŠ¡çš„ä¸­è½¬ç«™ç½‘ç«™

- **ç”¨é€”**ï¼šå¸®åŠ©å›½å†…ç”¨æˆ·ç»•è¿‡ç½‘ç»œé™åˆ¶ï¼Œç›´æ¥é€šè¿‡æœ¬åœ°ç»ˆç«¯ï¼ˆå¦‚ VS Code æ’ä»¶ã€Cursor æˆ–å‘½ä»¤è¡Œï¼‰è°ƒç”¨ Claude çš„ APIã€‚
- **ç°çŠ¶**ï¼šç›®å‰è¯¥ç«™ç‚¹å¸¸è¢«ç¤¾åŒºç”¨äº"ç™½å«–"æˆ–ä½æˆæœ¬ä½¿ç”¨ Claude Code åŠŸèƒ½

å…è´¹çš„å…¬ç›Šç«™æ³¨å†Œåœ°å€ï¼šhttps://anyrouter.top/register?aff=XYGH  æ¯å¤©ç™»é™†é€25ç¾é‡‘ï¼Œå¯ä»¥ä½¿ç”¨https://github.com/wwwzhouhui/anyrouter-check-in å®ç°è‡ªå®šç™»å½•è·å–æ¯å¤©25ç¾é‡‘ç§¯åˆ†

å¦å¤–æˆ‘ä»¬è¿˜æä¾›ä¸‹é¢çš„å…¬ç›Šç«™å’Œéå…¬ç›Šç«™å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©ä½¿ç”¨

  ä¸‹é¢æ˜¯å…è´¹claude glm4.6 gpt5ç­‰ç¬¬ä¸‰æ–¹å…¬ç›Šç«™
	ç¬¬äºŒå…¬ç›Šç«™(agentrouterï¼‰å¹³å°å¯ä»¥æŠ½å¥–æœ‰ç§¯åˆ†ï¼Œç™»é™†é€25ç¾é‡‘
	https://agentrouter.org/register?aff=u6Z4
	ç¬¬ä¸‰ä¸ªéå…¬ç›Šç«™ é‚€è¯·æ–°æˆ·é€ç§¯åˆ†ï¼Œå¯ä»¥å……å€¼
	https://api.codemirror.codes/register?aff=q9ke
     ç¬¬å››ä¸ªéå…¬ç›Šç«™ï¼Œé‚€è¯·æ–°æˆ·é€ç§¯åˆ†ï¼Œå¯ä»¥å……å€¼ï¼ˆæœ‰gemini-3-pro-image-preview æ¨¡å‹ï¼‰
	https://api.gemai.cc/register?aff=ND9Y
    ç¬¬äº”ä¸ªä¸­é—´ç«™ï¼Œé‚€è¯·æ–°æˆ·é€ç§¯åˆ†ï¼Œå¯ä»¥å……å€¼ï¼ˆæœ‰gemini-3-pro-image-previewï¼Œæœ‰æœ€æ–°çš„gpt5.2ï¼‰
    https://go.geeknow.top/register?aff=EdIn

â€‹     ç¬¬å…­ä¸ªä¸­é—´ç½‘ç«™ï¼Œé‚€è¯·æ–°æˆ·é€ç§¯åˆ†ï¼Œå¯ä»¥å……å€¼ï¼ˆæœ‰gemini-3-pro-image-previewï¼‰

   https://go.geeknow.top/register?aff=EdIn

   ç¬¬ä¸ƒä¸ªä»˜è´¹ç«™ï¼ˆæ”¯æŒsora2ï¼‰

  https://api.jxincm.cn/register?aff=SeEB

   ç¬¬å…«ä¸ªéå…¬ç›Šç«™ï¼Œé‚€è¯·æ–°æˆ·é€ç§¯åˆ†ï¼Œå¯ä»¥å……å€¼

   https://api.cpass.cc/register?aff=vkvc

AnyRouter.topç”±äºç½‘ç»œåŸå› å›½å†…è®¿é—®ä¸æ–¹ä¾¿ï¼Œå¦å¤–ä¹Ÿä¸èƒ½ç›´æ¥åœ¨newapiåšä»£ç†ä½¿ç”¨ï¼Œä¸èƒ½å®ç°apiæ¥å£çš„è°ƒç”¨ï¼Œé™åˆ¶æ¯”è¾ƒå¤šã€‚æ‰€ä»¥æœ¬é¡¹ç›®å€Ÿç”¨2æ¬¡ä¸­è½¬å’Œä»£ç†å®ç°apiæ¥å£å’Œclaude code æ— é™ç™½å«–ä½¿ç”¨ã€‚

**å…è´¹ä½“éªŒåœ°å€**  http://115.190.165.156:3000/

**å…è´¹ä½“éªŒapi key** :sk-eKU0nC4uERD0OVirefq6VgcD2FCwn7t7lvqy84c9xIQrlD1S    (100ç¾é‡‘ç”¨å®Œå°±æ­¢)

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®åŒ…å«å¤šä¸ªä»£ç†æœåŠ¡å’Œå®¢æˆ·ç«¯ç¤ºä¾‹ï¼Œå®ç°äº† OpenAI å’Œ Anthropic API åè®®çš„äº’ç›¸è½¬æ¢ï¼š

### ğŸš€ **æ–¹æ¡ˆä¸€ï¼šé€ä¼ ä»£ç†æ¨¡å¼ï¼ˆæ¨èï¼‰**

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `anyrouter2anthropic.py` | ä»£ç†æœåŠ¡ | AnyRouter é€ä¼ ä»£ç†ï¼ˆAnthropic åè®®ï¼‰ï¼Œç«¯å£ 9998 |
| `anyrouter2openai.py` | ä»£ç†æœåŠ¡ | AnyRouter é€ä¼ ä»£ç†ï¼ˆOpenAI åè®®ï¼‰ï¼Œç«¯å£ 9999 |
| `Dockerfile` | å®¹å™¨é…ç½® | Docker é•œåƒæ„å»ºæ–‡ä»¶ |
| `docker-compose.yml` | ç¼–æ’é…ç½® | Docker Compose æœåŠ¡ç¼–æ’ |
| `.env.example` | ç¯å¢ƒé…ç½® | ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ |
| `test_openai_proxy.py` | æµ‹è¯•è„šæœ¬ | OpenAI ä»£ç†æµ‹è¯•å®¢æˆ·ç«¯ |

**ğŸ¯ æ ¸å¿ƒç‰¹æ€§ï¼š**
- **é€ä¼ æ¨¡å¼**ï¼šå®¢æˆ·ç«¯å¿…é¡»æä¾›æœ‰æ•ˆçš„ API Keyï¼ŒæœåŠ¡åªåšåè®®è½¬æ¢å’Œä¸­è½¬
- **å¤š Key è´Ÿè½½å‡è¡¡**ï¼šå®¢æˆ·ç«¯å¯ä¼ é€’å¤šä¸ª Keyï¼ˆé€—å·åˆ†éš”ï¼‰ï¼Œè‡ªåŠ¨è½®è¯¢
- **æ— æœåŠ¡ç«¯å¯†é’¥**ï¼šæœåŠ¡ç«¯ä¸å­˜å‚¨ä»»ä½• API Keyï¼Œæ›´å®‰å…¨
- **ç®€å•éƒ¨ç½²**ï¼šä¸€é”® Docker Compose å¯åŠ¨

### ğŸ—ï¸ **æ–¹æ¡ˆäºŒï¼šåŸºäº LiteLLM + Render ä»£ç†è½¬å‘**ï¼ˆåŸå§‹æ–¹æ¡ˆï¼‰

| æ–‡ä»¶ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `anthropic2openai_proxy.py` | ä»£ç†æœåŠ¡ | Anthropic -> OpenAI åè®®è½¬æ¢ä»£ç† |
| `conf_anthropic20251212.yaml` | é…ç½®æ–‡ä»¶ | LiteLLM ä»£ç†é…ç½® |
| `openai_client.py` | å®¢æˆ·ç«¯ | OpenAI SDK è°ƒç”¨ç¤ºä¾‹ |
| `anthropic_client.py` | å®¢æˆ·ç«¯ | Anthropic SDK è°ƒç”¨ç¤ºä¾‹ |

## ä»£ç è°ƒç”¨å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            è°ƒç”¨é“¾è·¯ï¼šé€ä¼ ä»£ç†æ¨¡å¼                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  å®¢æˆ·ç«¯ (å¸¦ Key)  â”‚ â”€â”€â”€â–º â”‚   anyrouter2openai.py   â”‚ â”€â”€â”€â–º â”‚  AnyRouter  â”‚ â”‚
â”‚   â”‚  Authorization:   â”‚       â”‚   (åè®®è½¬æ¢ + é€ä¼ )      â”‚       â”‚  (Claude)   â”‚ â”‚
â”‚   â”‚  Bearer sk-xxx    â”‚       â”‚   ç«¯å£ 9999             â”‚       â”‚             â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                            â”‚                              â”‚        â”‚
â”‚           â–¼                            â–¼                              â–¼        â”‚
â”‚   OpenAI API æ ¼å¼             OpenAI â†’ Anthropic              Anthropic API    â”‚
â”‚   å®¢æˆ·ç«¯æä¾› API Key          æ ¼å¼è½¬æ¢ + Key é€ä¼             /v1/messages       â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Anthropic åè®®é€ä¼                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  å®¢æˆ·ç«¯ (å¸¦ Key)  â”‚ â”€â”€â”€â–º â”‚  anyrouter2anthropic.py  â”‚ â”€â”€â”€â–º â”‚  AnyRouter  â”‚ â”‚
â”‚   â”‚  x-api-key:       â”‚       â”‚   (ç›´æ¥é€ä¼ )              â”‚       â”‚  (Claude)   â”‚ â”‚
â”‚   â”‚  sk-xxx           â”‚       â”‚   ç«¯å£ 9998              â”‚       â”‚             â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é€ä¼ ä»£ç†æ¨¡å¼ï¼ˆæ¨èï¼‰ğŸŒŸ

#### ç‰¹ç‚¹
- âœ… **é€ä¼ æ¨¡å¼**ï¼šå®¢æˆ·ç«¯å¿…é¡»æä¾›æœ‰æ•ˆçš„ API Key
- âœ… **å¤š Key è´Ÿè½½å‡è¡¡**ï¼šæ”¯æŒé€—å·åˆ†éš”çš„å¤šä¸ª Key è‡ªåŠ¨è½®è¯¢
- âœ… **æ— æœåŠ¡ç«¯å¯†é’¥**ï¼šæ›´å®‰å…¨ï¼Œä¸åœ¨æœåŠ¡ç«¯å­˜å‚¨ä»»ä½• Key
- âœ… **Docker éƒ¨ç½²**ï¼šä¸€è¡Œå‘½ä»¤å®Œæˆéƒ¨ç½²
- âœ… **å¥åº·æ£€æŸ¥**ï¼šå†…ç½®ç›‘æ§æ¥å£

#### å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨ Anthropic åè®®ä»£ç†ï¼ˆç«¯å£ 9998ï¼‰
python anyrouter2anthropic.py

# å¯åŠ¨ OpenAI åè®®ä»£ç†ï¼ˆç«¯å£ 9999ï¼‰
python anyrouter2openai.py
```

#### å®¢æˆ·ç«¯è°ƒç”¨ç¤ºä¾‹

##### OpenAI åè®®ä»£ç†

```python
import openai

client = openai.OpenAI(
    api_key="sk-your-anyrouter-api-key",  # å¿…é¡»æä¾›æœ‰æ•ˆçš„ API Key
    base_url="http://localhost:9999/v1"
)

response = client.chat.completions.create(
    model="claude-haiku-4-5-20251001",
    messages=[{"role": "user", "content": "ä½ å¥½"}],
    stream=True
)

for chunk in response:
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="")
```

##### å¤š Key è´Ÿè½½å‡è¡¡

```python
import openai

# å¤šä¸ª Key ç”¨é€—å·åˆ†éš”ï¼Œä»£ç†ä¼šè‡ªåŠ¨è½®è¯¢
client = openai.OpenAI(
    api_key="sk-key1,sk-key2,sk-key3",
    base_url="http://localhost:9999/v1"
)
```

##### Anthropic åè®®ä»£ç†

```python
import anthropic

client = anthropic.Anthropic(
    api_key="sk-your-anyrouter-api-key",  # å¿…é¡»æä¾›æœ‰æ•ˆçš„ API Key
    base_url="http://localhost:9998"
)

response = client.messages.create(
    model="claude-haiku-4-5-20251001",
    max_tokens=1024,
    messages=[{"role": "user", "content": "ä½ å¥½"}]
)

print(response.content[0].text)
```

##### cURL æµ‹è¯•

```bash
# æµ‹è¯• OpenAI ä»£ç†
curl -X POST http://localhost:9999/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-your-api-key" \
  -d '{
    "model": "claude-haiku-4-5-20251001",
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
  }'

# æµ‹è¯• Anthropic ä»£ç†
curl -X POST http://localhost:9998/v1/messages \
  -H "Content-Type: application/json" \
  -H "x-api-key: sk-your-api-key" \
  -d '{
    "model": "claude-haiku-4-5-20251001",
    "max_tokens": 1024,
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
  }'

# æ—  Key æµ‹è¯•ï¼ˆé¢„æœŸè¿”å› 401ï¼‰
curl http://localhost:9999/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{"model": "test", "messages": []}'
```

### 3. Docker éƒ¨ç½²

#### å¿«é€Ÿå¯åŠ¨

```bash
# æ‹‰å–é•œåƒ
docker pull wwwzhouhui569/anyrouter2proxy:latest

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

#### éªŒè¯æœåŠ¡

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:9998/health
curl http://localhost:9999/health

# æœåŠ¡ä¿¡æ¯
curl http://localhost:9998/
curl http://localhost:9999/
```

### 4. ä½¿ç”¨ LiteLLM ä»£ç†ï¼ˆåŸå§‹æ–¹æ¡ˆï¼‰

```bash
# å¯åŠ¨ Anthropic -> OpenAI åè®®è½¬æ¢ä»£ç†
python anthropic2openai_proxy.py
# æˆ–ä½¿ç”¨ LiteLLM
litellm --config conf_anthropic20251212.yaml --port 8088 --host 0.0.0.0
```

## ç¯å¢ƒå˜é‡è¯´æ˜

### é€ä¼ ä»£ç†é…ç½®

| å˜é‡å | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `ANYROUTER_BASE_URL` | âŒ | `https://anyrouter.top` | AnyRouter æœåŠ¡åœ°å€ |
| `PORT` | âŒ | `9998` | Anthropic ä»£ç†ç«¯å£ |
| `OPENAI_PROXY_PORT` | âŒ | `9999` | OpenAI ä»£ç†ç«¯å£ |
| `HOST` | âŒ | `0.0.0.0` | ç»‘å®šåœ°å€ |
| `HTTP_TIMEOUT` | âŒ | `120` | HTTP è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ |
| `DEFAULT_MAX_TOKENS` | âŒ | `8192` | é»˜è®¤æœ€å¤§ tokens |
| `FORCE_NON_STREAM` | âŒ | `false` | å¼ºåˆ¶éæµå¼æ¨¡å¼ |
| `DEFAULT_SYSTEM_PROMPT` | âŒ | `You are Claude...` | é»˜è®¤ç³»ç»Ÿæç¤ºè¯ |

**æ³¨æ„**ï¼šé€ä¼ æ¨¡å¼ä¸éœ€è¦åœ¨æœåŠ¡ç«¯é…ç½® `API_KEYS`ï¼Œå®¢æˆ·ç«¯å¿…é¡»æä¾›æœ‰æ•ˆçš„ API Keyã€‚

## API ç«¯ç‚¹

### anyrouter2anthropic.py (ç«¯å£ 9998)

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/v1/messages` | POST | Anthropic Messages APIï¼ˆéœ€è¦ x-api-key æˆ– Authorizationï¼‰ |
| `/v1/models` | GET | åˆ—å‡ºå¯ç”¨æ¨¡å‹ï¼ˆéœ€è¦è®¤è¯ï¼‰ |
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/` | GET | æœåŠ¡ä¿¡æ¯ |

### anyrouter2openai.py (ç«¯å£ 9999)

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/v1/chat/completions` | POST | OpenAI Chat Completions APIï¼ˆéœ€è¦ Authorizationï¼‰ |
| `/v1/models` | GET | åˆ—å‡ºå¯ç”¨æ¨¡å‹ï¼ˆéœ€è¦è®¤è¯ï¼‰ |
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/` | GET | æœåŠ¡ä¿¡æ¯ |

## è®¤è¯æ–¹å¼

### OpenAI ä»£ç† (9999)

```
Authorization: Bearer sk-your-api-key
# æˆ–å¤š Key è´Ÿè½½å‡è¡¡
Authorization: Bearer sk-key1,sk-key2,sk-key3
```

### Anthropic ä»£ç† (9998)

```
x-api-key: sk-your-api-key
# æˆ–
Authorization: Bearer sk-your-api-key
# å¤š Key è´Ÿè½½å‡è¡¡
x-api-key: sk-key1,sk-key2,sk-key3
```

## é”™è¯¯å“åº”

### æœªæä¾› API Key (401)

```json
{
  "error": {
    "message": "Authorization header required. Please provide a valid API key.",
    "type": "authentication_error"
  }
}
```

### API Key æ— æ•ˆï¼ˆæ¥è‡ªä¸Šæ¸¸ï¼‰

ä¸Šæ¸¸ AnyRouter è¿”å›çš„é”™è¯¯ä¼šè¢«é€ä¼ ç»™å®¢æˆ·ç«¯ã€‚

## æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹åç§° | è¯´æ˜ |
|---------|------|
| `claude-haiku-4-5-20251001` | Claude Haiku 4.5 |
| `claude-3-5-haiku-20241022` | Claude 3.5 Haiku |
| `claude-3-5-sonnet-20241022` | Claude 3.5 Sonnet |
| `claude-3-7-sonnet-20250219` | Claude 3.7 Sonnet |
| `claude-opus-4-5-20251101` | Claude Opus 4.5 |
| `claude-sonnet-4-20250514` | Claude Sonnet 4 |
| `claude-sonnet-4-5-20250929` | Claude Sonnet 4.5 |

## é¡¹ç›®ç»“æ„

```
anyrouter2proxy/
â”œâ”€â”€ # ğŸš€ é€ä¼ ä»£ç†æ¨¡å¼ï¼ˆæ¨èï¼‰
â”œâ”€â”€ anyrouter2anthropic.py       # Anthropic åè®®é€ä¼ ä»£ç† (ç«¯å£ 9998)
â”œâ”€â”€ anyrouter2openai.py          # OpenAI åè®®é€ä¼ ä»£ç† (ç«¯å£ 9999)
â”œâ”€â”€ test_openai_proxy.py         # OpenAI ä»£ç†æµ‹è¯•è„šæœ¬
â”œâ”€â”€ Dockerfile                    # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml           # Docker Compose æœåŠ¡ç¼–æ’
â”œâ”€â”€ docker-compose-dev.yml       # å¼€å‘ç¯å¢ƒ Docker Compose
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–åŒ…
â”œâ”€â”€ DOCKER.md                    # Docker éƒ¨ç½²è¯¦ç»†æŒ‡å—
â”‚
â”œâ”€â”€ # ğŸ—ï¸ LiteLLM + Render æ–¹æ¡ˆ
â”œâ”€â”€ anthropic2openai_proxy.py    # Anthropic -> OpenAI ä»£ç† (ç«¯å£ 8088)
â”œâ”€â”€ conf_anthropic20251212.yaml  # LiteLLM é…ç½®æ–‡ä»¶
â”œâ”€â”€ openai_client.py             # OpenAI SDK å®¢æˆ·ç«¯ç¤ºä¾‹
â”œâ”€â”€ anthropic_client.py          # Anthropic SDK å®¢æˆ·ç«¯ç¤ºä¾‹
â”‚
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

## ä½¿ç”¨åœºæ™¯

### ğŸš€ é€ä¼ ä»£ç†æ¨¡å¼ï¼ˆæ¨èï¼‰

1. **å®‰å…¨éƒ¨ç½²**ï¼šä¸åœ¨æœåŠ¡ç«¯å­˜å‚¨ API Keyï¼Œæ¯ä¸ªç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ Key
2. **å¤šç§Ÿæˆ·**ï¼šä¸åŒç”¨æˆ·ä½¿ç”¨ä¸åŒçš„ Keyï¼Œäº’ä¸å½±å“
3. **è´Ÿè½½å‡è¡¡**ï¼šå•ç”¨æˆ·å¤š Key è‡ªåŠ¨è½®è¯¢
4. **åè®®è½¬æ¢**ï¼šä½¿ç”¨ OpenAI SDK è°ƒç”¨ Claude æ¨¡å‹

### ğŸ—ï¸ LiteLLM æ–¹æ¡ˆ

1. **å¿«é€ŸåŸå‹**ï¼šæ— éœ€æœ¬åœ°éƒ¨ç½²ï¼Œä½¿ç”¨ Render å…è´¹æ‰˜ç®¡
2. **å­¦ä¹ ç ”ç©¶**ï¼šäº†è§£ LiteLLM çš„é…ç½®å’Œä½¿ç”¨æ–¹å¼

## éƒ¨ç½²å®æˆ˜

â€‹    é¡¹ç›®æ•´ä½“è°ƒç”¨æµç¨‹å›¾å¦‚ä¸‹

![æµç¨‹è°ƒç”¨å›¾_ç²¾ç¾ç‰ˆ](https://mypicture-1258720957.cos.ap-nanjing.myqcloud.com/Obsidian/%E6%B5%81%E7%A8%8B%E8%B0%83%E7%94%A8%E5%9B%BE_%E7%B2%BE%E7%BE%8E%E7%89%88.png)

### Docker ä¸€é”®éƒ¨ç½²

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo>
cd anyrouter2proxy

# 2. å¯åŠ¨æœåŠ¡ï¼ˆé€ä¼ æ¨¡å¼ï¼Œæ— éœ€é…ç½® API Keyï¼‰
docker-compose up -d

# 3. éªŒè¯æœåŠ¡
curl http://localhost:9998/health
curl http://localhost:9999/health

# 4. æµ‹è¯•è°ƒç”¨ï¼ˆéœ€è¦æä¾›ä½ çš„ API Keyï¼‰
curl -X POST http://localhost:9999/v1/chat/completions \
  -H "Authorization: Bearer sk-your-anyrouter-api-key" \
  -H "Content-Type: application/json" \
  -d '{"model": "claude-haiku-4-5-20251001", "messages": [{"role": "user", "content": "ä½ å¥½"}]}'
```

### Claude Code é…ç½®

ä½¿ç”¨ cc-switch é…ç½®ï¼š

```json
{
  "env": {
    "ANTHROPIC_AUTH_TOKEN": "sk-your-anyrouter-api-key",
    "ANTHROPIC_BASE_URL": "http://localhost:9998",
    "ANTHROPIC_MODEL": "claude-haiku-4-5-20251001"
  }
}
```

### Cherry Studio é…ç½®

1. æ·»åŠ æ–°çš„ API æä¾›å•†
2. API åœ°å€ï¼š`http://localhost:9999/v1`ï¼ˆOpenAIï¼‰æˆ– `http://localhost:9998`ï¼ˆAnthropicï¼‰
3. API Keyï¼šå¡«å…¥ä½ çš„ anyrouter.top API Key
4. é€‰æ‹©æ¨¡å‹å¹¶å¼€å§‹ä½¿ç”¨

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **401 Unauthorized**
   - ç¡®ä¿è¯·æ±‚å¤´åŒ…å«æœ‰æ•ˆçš„ API Key
   - OpenAI åè®®ä½¿ç”¨ `Authorization: Bearer sk-xxx`
   - Anthropic åè®®ä½¿ç”¨ `x-api-key: sk-xxx`

2. **æœåŠ¡æ— æ³•è®¿é—®**
   ```bash
   # æ£€æŸ¥æœåŠ¡çŠ¶æ€
   docker-compose ps
   docker-compose logs
   ```

3. **ä¸Šæ¸¸é”™è¯¯**
   - æ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ
   - æ£€æŸ¥ AnyRouter æœåŠ¡æ˜¯å¦å¯ç”¨

---

é€šè¿‡é€ä¼ æ¨¡å¼ï¼Œä½ å¯ä»¥å®‰å…¨ã€çµæ´»åœ°ä½¿ç”¨ AnyRouter ä»£ç†æœåŠ¡ï¼
